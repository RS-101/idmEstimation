% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/simulate_idm.R
\name{add_censoring}
\alias{add_censoring}
\title{Add Interval Censoring to Exact Illness-Death Data}
\usage{
add_censoring(exact_idm, average_number_of_visits)
}
\arguments{
\item{exact_idm}{Data frame with class \code{"exact_idm"} from
\code{\link{simulate_exact_idm}}, containing true event times.}

\item{average_number_of_visits}{Numeric. Average number of observation visits
per subject across the follow-up period.}
}
\value{
A list with two components:
\describe{
\item{obs}{Data frame with observed (censored) data containing:
\itemize{
\item \code{id}: Subject ID
\item \code{V_0}: Baseline visit time (always 0)
\item \code{V_healthy}: Last visit when observed healthy
\item \code{V_ill}: First visit when illness observed (NA if never observed)
\item \code{T_obs}: Observation/censoring time
\item \code{status_dead}: Indicator for observed death (1) or censoring (0)
\item \code{status_ill}: Indicator for observed illness (1) or not (0)
\item \code{case}: Factor classifying observation pattern (A-F)
}}
\item{cens_mechanism}{Data frame with censoring mechanism details including
observation schedules and censoring times.}
}
}
\description{
Applies an observation schedule with interval censoring and right-censoring
to exact illness-death model data. Illness times become interval-censored between
visits, and subjects may be censored before death.
}
\details{
The function creates an observation schedule with visits spaced to achieve
approximately \code{average_number_of_visits} over each subject's follow-up.
Visits are jittered with small random noise to mimic realistic data.

Censoring times are drawn from Uniform(0, 3 * death_time) for each subject.
Illness is only observed if it occurs between two consecutive visits within
the observation period.

Six observation cases are defined:
\itemize{
\item Case A: Illness and death both observed
\item Case B: Illness observed, censored while ill
\item Case C: Death observed, healthy at last visit before death
\item Case D: Censored, healthy at last visit
\item Case E: Death observed, unknown if healthy or ill (missing transition)
\item Case F: Censored, unknown if healthy or ill (missing transition)
}
}
\examples{
set.seed(456)
exact_data <- simulate_exact_idm(
  n = 50,
  a12 = function(t) rep(0.01, length(t)),
  a13 = function(t) rep(0.005, length(t)),
  a23 = function(t) rep(0.02, length(t))
)
censored_data <- add_censoring(exact_data, average_number_of_visits = 10)
head(censored_data$obs)
table(censored_data$obs$case)

}
\seealso{
\code{\link{simulate_exact_idm}}, \code{\link{simulate_idm}}
}
