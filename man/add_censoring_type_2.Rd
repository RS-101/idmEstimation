% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/simulate_idm.R
\name{add_censoring_type_2}
\alias{add_censoring_type_2}
\title{Add Interval Censoring to Exact Illness-Death Data}
\usage{
add_censoring_type_2(
  exact_idm,
  probability_of_dropout,
  mean_time_between_visits,
  sd_time_between_visits,
  increment_in_dropout_prop,
  probability_of_right_censoring,
  prob_censoring_at_last_visit
)
}
\arguments{
\item{exact_idm}{Data frame with class \code{"exact_idm"} from
\code{\link{simulate_exact_idm}}, containing true event times.}

\item{probability_of_dropout}{Numeric. Probability of dropout at each visit}

\item{mean_time_between_visits}{Numeric. Average time between visits}

\item{sd_time_between_visits}{Numeric. sd of time between visits}

\item{increment_in_dropout_prop}{Numeric. Relative increment in probability of
dropout at each visit}
}
\value{
A list with two components:
\describe{
\item{obs}{Data frame with observed (censored) data containing:
\itemize{
\item \code{id}: Subject ID
\item \code{V_healthy}: Last visit when observed healthy
\item \code{V_ill}: First visit when illness observed (NA if never observed)
\item \code{T_obs}: Observation/censoring time
\item \code{status_dead}: Indicator for observed death (1) or censoring (0)
\item \code{status_ill}: Indicator for observed illness (1) or not (0)
\item \code{case}: Factor classifying observation pattern (A-F)
}}
\item{cens_mechanism}{Data frame with censoring mechanism details including
observation schedules and censoring times.}
}
}
\description{
Applies type 2 censoring
}
\details{
At each visit, subject have a probability of dropping out of the study,
such that they are no longer followed detemind by probability_of_dropout.
The dropout probability increases at each visit by a factor of
increment_in_dropout_prop.  The time between visits is generated from a
gamma distribution with shape and scale parameters derived from the mean
and standard deviation of time between visits.

The function creates an observation schedule with visits spaced to achieve
approximately \code{average_number_of_visits} over each subject's follow-up.
Visits are jittered with small random noise to mimic realistic data.

Censoring times are drawn from Uniform(0, 3 * death_time) for each subject.
Illness is only observed if it occurs between two consecutive visits within
the observation period.

Six observation cases are defined:
\itemize{
\item Case A: Illness and death both observed
\item Case B: Illness observed, censored while ill
\item Case C: Death observed, healthy at last visit before death
\item Case D: Censored, healthy at last visit
\item Case E: Death observed, unknown if healthy or ill (missing transition)
\item Case F: Censored, unknown if healthy or ill (missing transition)
}
}
